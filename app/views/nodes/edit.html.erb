<% provide(:title, @node.name) %>
<div id="fMessages"></div>



<div class="row">
	<div class="col-md-3 tree_icon"><%= image_tag(@node.icon, id: "tree_icon" )%></div>
  <div class="col-md-9">
		<h1 class='nowrap'><%= @node.name %></h1>
    <%= form_tag do  %>
    <%= label_tag(:_node_name, "Name:") %>
		<%= text_field_tag(:node_name, @node.name) %>
		<%= hidden_field(:graph, "id", {:value => @node.id}) %>
		<% end %>
		<% puts @node.tag_list %>
		<%= label_tag(:_node_tags, "Tags:") %>
		<input type="text" value="<%= @node.tag_list %>" data-role="tagsinput" id="tree_tags"/>
		
	</div>
</div>

<div id="graphContainer"></div>

<button onclick="postGraph()">Save</button> 

<%= link_to 'Show', @node %> |
<%= link_to 'Back', nodes_path %>

<div id="savestate"></div>

<script>

	var default_icon = "<%= image_url('0-pignon-128.png', id: "default_icon" )%>";
  jsPlumb.ready(function(){
		var editable = true;
		init_jsplumb(default_icon, editable);
		icon_selector_dialog($('#tree_icon'));
		<%= render 'filltree', :node => @node, :edit => true, :learn => false %>
  });


</script>

